!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Babel=t():e.Babel=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(8)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];n(this,e),this._x=t,this._y=i,this._z=r}return i(e,[{key:"getX",value:function(){return this._x}},{key:"getY",value:function(){return this._y}},{key:"getZ",value:function(){return this._z}},{key:"magnitude",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"asUnitVector",value:function(){var t=this.magnitude();return new e(this._x/t,this._y/t,this._z/t)}},{key:"scaled",value:function(t){var n=this.magnitude();return new e(this._x*t/n,this._y*t/n,this._z*t/n)}},{key:"multiply",value:function(e){return this._x*=e,this._y*=e,this._z*=e,this}},{key:"add",value:function(e){return this._x+=e._x,this._y+=e._y,this._z+=e._z,this}},{key:"vectorTo",value:function(t){return new e(t._x-this._x,t._y-this._y,t._z-this._z)}},{key:"withinSphere",value:function(e,t){var n=(this._x-e._x)*(this._x-e._x)+(this._y-e._y)*(this._y-e._y)+(this._z-e._z)*(this._z-e._z);return n<t*t}},{key:"withinBox",value:function(e,t){return!0}},{key:"copy",value:function(){return new e(this._x,this._y,this._z)}}],[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}}]),e}();t["default"]=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),a=i(u),s=function(){function e(t,n){r(this,e),this._offset=new a["default"],this._position=new a["default"],this._selectable=!0,this._transformable=!0,this._type=n,this._id=t}return o(e,[{key:"setPosition",value:function(e,t,n){this._position=new a["default"](e+this._offset._x,t+this._offset._y,n+this._offset._z)}},{key:"getPosition",value:function(){return this._position}},{key:"setOffset",value:function(e,t,n){this._offset=new a["default"](e,t,n)}},{key:"getOffset",value:function(){return this._offset}},{key:"setTransformable",value:function(e){this._transformable=e}},{key:"getTransformable",value:function(){return this._transformable}},{key:"setSelectable",value:function(e){this._selectable=e}},{key:"getSelectable",value:function(){return this._selectable}},{key:"getType",value:function(){return this._type}},{key:"getId",value:function(){return this._id}}]),e}();t["default"]=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this._events={}}return i(e,[{key:"on",value:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this}},{key:"off",value:function(e,t){if(void 0==e)return void(this._events={});if(e in this._events!=!1)return t?this._events[e].splice(this._events[e].indexOf(t),1):this._events[e]=[],this}},{key:"emit",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var i=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==i)return i}}},{key:"guid",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?"xxxxxxxxxxxx":arguments[0],n=(new Date).getTime(),t=e.replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:7&t|8).toString(16)});return t}}]),e}();t["default"]=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),c=i(s),l=n(1),f=i(l),h=function(e){function t(e,n){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e,n))}return u(t,e),a(t,[{key:"computeAcceleration",value:function(e){return new f["default"]}}]),t}(c["default"]);t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(4),c=i(s),l=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e,1));return n._force=0,n}return u(t,e),a(t,[{key:"applyForce",value:function(e){var t=e._position,n=this._position,i=n._x-t._x,r=n._y-t._y,o=n._z-t._z,u=e._charge*this._force/Math.pow(i*i+r*r+o*o,1.5);if(Math.abs(u)>.001){var a=e._acceleration;a._x+=i*u,a._y+=r*u,a._z+=o*u}}},{key:"setForce",value:function(e){this._force=e}},{key:"getForce",value:function(){return this._force}}]),t}(c["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),a=i(u),s=function(){function e(t){r(this,e),this._velocity=new a["default"],this._position=new a["default"],this._acceleration=new a["default"],this._recycled=!1,this._radius=.03,this._dof=t,this._lifeTime=30,this._charge=1,this.ptr=1}return o(e,[{key:"reset",value:function(){this._recycled=!1,this._lifeTime=30}},{key:"submitToFields",value:function(e){var t=this;this._acceleration._x=0,this._acceleration._y=0,this._acceleration._z=0,e.forEach(function(e){e.applyForce(t)})}},{key:"step",value:function(e){this._lifeTime-=e,this._velocity._x+=this._acceleration._x*e,this._velocity._y+=this._acceleration._y*e,this._velocity._z+=this._acceleration._z*e,this._position._x+=this._velocity._x*this._dof._x*e,this._position._y+=this._velocity._y*this._dof._y*e,this._position._z+=this._velocity._z*this._dof._z*e}},{key:"getRecycled",value:function(){return this._recycled}},{key:"getLifeTime",value:function(){return this._lifeTime}},{key:"setLifeTime",value:function(e){this._lifeTime=e}},{key:"getAcceleration",value:function(){return this._acceleration}},{key:"getPosition",value:function(){return this._position}},{key:"getCharge",value:function(){return this._charge}},{key:"getRadius",value:function(){return this._radius}}]),e}();t["default"]=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),c=i(s),l=n(1),f=(i(l),function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e,0));return n._spread=2*Math.PI/180,n._emissionRate=500,n._velocity=10,n._charge=1,n}return u(t,e),a(t,[{key:"emitNumber",value:function(e){return Math.floor(this._emissionRate*e)}},{key:"emitParticle",value:function(e){var t=this._spread*(2*Math.random()-1),n=this._spread*(2*Math.random()-1);e._velocity._x=this._velocity*Math.cos(t)*Math.cos(n),e._velocity._y=this._velocity*Math.sin(t)*Math.cos(n),e._velocity._z=this._velocity*Math.sin(n),e._position._x=this._position._x,e._position._y=this._position._y,e._position._z=this._position._z,e._charge=this._charge}},{key:"setEmissionRate",value:function(e){this._emissionRate=e}},{key:"getEmissionRate",value:function(){return this._emissionRate}},{key:"setVelocity",value:function(e){this._velocity=e}},{key:"getVelocity",value:function(){return this._velocity}},{key:"setSpread",value:function(e){this._spread=e}},{key:"getSpread",value:function(){return this._spread}},{key:"setCharge",value:function(e){this._charge=e}},{key:"getCharge",value:function(){return this._charge}}]),t}(c["default"]));t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=t.ParticleSystem=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(7),c=i(s),l=n(5),f=i(l),h=n(3),_=i(h),y=n(6),v=i(y),p=n(1),d=i(p),b=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this));return n._maxParticles=e,n._dof=new d["default"](1,1,1),n._emittedParticles=0,n._particleIdx=0,n._recycleBin=[],n._particles=[],n._emitters=[],n._fields=[],n}return u(t,e),a(t,[{key:"setMaxParticles",value:function(e){this._maxParticles=e}},{key:"getMaxParticles",value:function(){return this._maxParticles}},{key:"getObjectById",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._emitters[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var u=r.value;if(u.getId()===e)return u}}catch(a){n=!0,i=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}var s=!0,c=!1,l=void 0;try{for(var f,h=this._fields[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var _=f.value;if(_.getId()===e)return _}}catch(a){c=!0,l=a}finally{try{!s&&h["return"]&&h["return"]()}finally{if(c)throw l}}return null}},{key:"getEmitter",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._emitters[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var u=r.value;if(u.getId()===e)return u}}catch(a){n=!0,i=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return null}},{key:"getMagneticField",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._fields[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var u=r.value;if(u.getId()===e)return u}}catch(a){n=!0,i=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw i}}return null}},{key:"setDof",value:function(e,t,n){this._dof=new d["default"](e,t,n)}},{key:"destroy",value:function(){this._recycleBin=[],this._particles=[]}},{key:"addEmitter",value:function(e){var t=new c["default"](e);return this._emitters.push(t),t}},{key:"addMagneticField",value:function(e){var t=new f["default"](e);return this._fields.push(t),t}},{key:"step",value:function(e){this.addNewParticles(e),this.filterParticles(e)}},{key:"addNewParticles",value:function(e){var t=this;this._emitters.forEach(function(n){for(var i=0;i<n.emitNumber(e);++i){var r=t.popRecycle();r&&n.emitParticle(r)}})}},{key:"pushRecycle",value:function(e){--this._emittedParticles,e._recycled=!0,this._recycleBin.push(e)}},{key:"popRecycle",value:function(){if(this._emittedParticles>this._maxParticles-1)return null;++this._emittedParticles;var e=this._recycleBin.pop();return e?(e.reset(),e):(e=new v["default"](this._dof),this._particles.push(e),e)}},{key:"filterParticle",value:function(e){return!!e._recycled||e._lifeTime<0&&(this.pushRecycle(e),!0)}},{key:"filterParticles",value:function(e){var t=this;this._particles.forEach(function(n){t.filterParticle(n)||(n.submitToFields(t._fields),n.step(e))})}},{key:"initParticleLoop",value:function(){this._particleIdx=0}},{key:"nextParticle",value:function(){return this._particleIdx<this._particles.length?this._particles[this._particleIdx++]:{ptr:0}}}]),t}(_["default"]);t["default"]=b,t.ParticleSystem=b,t.Vector=d["default"]}])});